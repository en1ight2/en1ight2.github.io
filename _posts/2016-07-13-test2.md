---
layout: post
title: Тестовый заголовк на Raz Raz
---

<article class="columns-59 content">
    
<h1 id="sozdaemblogispolyzuyajekylligithubpages"><a href="#sozdaemblogispolyzuyajekylligithubpages">Создаем блог используя Jekyll и GitHub Pages</a></h1>

<p>Недавно я перенес блог с WordPress на Jekyll — это генератор
статических сайтов. Jekyll был специально разработан для 
создания минималистичных блогов, которые затем можно разместить на 
GitHub Pages. Написание статей и создание тем для Jekyll удивительно 
просты, однако настройка сайта заняла у меня значительно больше 
времени, чем ожидалось.</p>

<p>В этой статье мы рассмотрим следующие моменты:</p>

<ul>
<li>как быстрее всего запустить блог на Jekyll;</li>
<li>как избежать основных ошибок при работе с Jekyll;</li>
<li>как перенести материалы из WordPress, как использовать свое
доменное имя и как писать статьи в любимом редакторе;</li>
<li>как создавать темы для Jekyll используя Liquid;</li>
<li>несколько новых функций из Jekyll 2.0, включая поддержку Sass,
CoffeeScript и коллекций.</li>
</ul>
<h2 id="naznacheniejekyll"><a href="#naznacheniejekyll">Назначение Jekyll</a></h2>

<p>Том Престон-Вернер (Tom Preston-Werner) создал Jekyll, чтобы вести блог
используя простой статический сайт на HTML. Всё содержимое сайта хранится 
на GitHub, который, к тому же, осуществляет контроль версий. 
Целью было избавиться от сложности, свойственной другим блог-платформам, 
чтобы при этом можно было вести блог как <a href="http://tom.preston-werner.com/2008/11/17/blogging-like-a-hacker.html">настоящий хакер</a>.</p>

<p><img src="img/octojekyll-opt.jpg" alt="Октокот, который является маскотом Jekyll"></p>

<p><em>Октокот, который является маскотом Jekyll. (Изображение
 принадлежит: <a href="http://jekyllrb.com/">GitHub</a>)</em></p>

<p>Jekyll берет контент написанный в маркдаун, применяет к нему шаблоны и выдает 
на выходе готовый, полностью статический сайт. GitHub Pages отдает сайт прямо
из GitHub-репозитория, так что вам не нужно иметь дело с хостингами.</p>

<p>Вот примеры сайтов, созданных с использованием Jekyll:</p>

<ul>
<li>
<a href="http://www.barryclark.co/">Блог Барри Кларка (Barry Clark)</a> (это мой)</li>
<li><a href="http://zachholman.com/">Блог Зака Холмана (Zach Holman)</a></li>
<li><a href="http://csswizardry.com/about/#colophon">CSS Wizardry</a></li>
<li><a href="http://jekyllrb.com/">Jekyll</a></li>
<li>Лэндинг и внутренние страницы <a href="http://www.healthcare.gov/">HealthCare.gov</a>
</li>
<li><a href="http://developmentseed.org/blog/2013/10/24/its-called-jekyll/">Development Seed</a></li>
</ul>
<h2 id="preimushtestvastatiki"><a href="#preimushtestvastatiki">Преимущества статики</a></h2>

<ul>
<li>
<p><strong>Простота</strong><br>
Jekyll сводит все к абсолютному минимуму, избавляясь от сложных составляющих:</p>

<ul>
<li><p><strong>Никаких баз данных</strong>
В отличие от WordPress и других систем управления
контентом (CMS), Jekyll не использует базы данных
(БД). Все страницы перед публикацией преобразуются в
статический HTML. Это прекрасно с точки зрения
скорости загрузки страницы, так как во время загрузки 
не происходит никаких запросов к БД.</p></li>
<li><p><strong>Никаких CMS</strong>
Просто пишите в Markdown — Jekyll сам применит шаблоны к контенту
и сгенерирует статический сайт.  GitHub может исполнять роль CMS,
если нужно, потому что он позволяет редактировать контент.</p></li>
<li><p><strong>Быстрый</strong>
Jekyll быстрый, потому, что в нём нет ничего лишнего
и он не использует базы данных — он просто
собирает статические страницы. Мой основной шаблон
<a href="http://github.com/barryclark/jekyll-now">Jekyll Now</a> создает всего три HTTP-запроса,
включая картинки и иконки социальных сетей!</p></li>
<li><p><strong>Минималистичный</strong>
Большинство сайтов на Jekyll не содержит никакой
лишней функциональности или возможностей, которые
вы не используете.</p></li>
</ul>
</li>
<li><p><strong>Контроль представления</strong>
Тратьте меньше времени на сложные шаблоны,
написанные другими людьми, и больше —&nbsp;адаптируя 
простой базовый шаблон или создавая свой собственный.</p></li>
<li><p><strong>Безопасность</strong>
Большинство уязвимостей, которые есть у платформ вроде
WordPress, отсутствуют в Jekyll, потому что здесь нет
CMS, нет баз данных или PHP. Так что вам не нужно тратить
массу времени устанавливая обновления, закрывающие
дыры в безопасности.</p></li>
<li><p><strong>Удобный хостинг</strong>
Это просто удобно, если вы уже используете GitHub, вот и все.
GitHub Pages бесплатно соберет и выложит сайт, использующий Jekyll,
и одновременно реализует для него контроль версий.</p></li>
</ul>
<h2 id="davaytepoprobuem"><a href="#davaytepoprobuem">Давайте попробуем</a></h2>

<p>Есть несколько способов разобраться с Jekyll, у каждого свои
особенности. Вот несколько вариантов:</p>

<ul>
<li>Установите Jekyll локально используя консоль, создайте
заготовку нового сайта командой <code>jekyll new</code>,
соберите его командой <code>jekyll build</code> и выложите.
(<a href="http://jekyllrb.com/">Веб-сайт Jekyll</a> показывает процесс.)</li>
<li>Клонируйте репозиторий с заготовкой на локальную машину,
установите Jekyll локально из консоли, внесите правки, соберите
локально, выложите.</li>
<li>Форкните репозиторий с заготовкой, измените, выложите.</li>
</ul>
<p>Давайте начнем с самого простого и быстрого варианта: форкнем репозиторий
с заготовкой. Это позволит запустить проект в считанные
минуты, и нам не придется устанавливать все зависимости. Вот что
мы сделаем на GitHub.com прямо в браузере:</p>

<ol>
<li>Создадим сайт используя Jekyll</li>
<li>Бесплатно разместим на GitHub Pages.</li>
<li>Изменим так, что бы он включал наше имя, аватар и ссылки на
социальные сети.</li>
<li>Опубликуем наш первый пост!</li>
</ol>
<h3 id="1forknitezagotovku"><a href="#1forknitezagotovku">1. Форкните заготовку</a></h3>

<p>Начнем с создания форка репозитория — это хорошая практика, 
о которых мы упоминали в статье. Этот способ направит нас по верному 
пути и сбережет уйму времени.</p>

<p>Я уже создал нам репозиторий. Откройте <a href="http://www.github.com/barryclark/jekyll-now">Jekyll Now</a> и нажмите кнопку «Fork»
в верхнем правом углу страницы, чтобы создать форк темы блога в вашу учетную
запись на GitHub.</p>

<p><img src="img/step1.gif" alt="Шаг 1"></p>

<p><em>Инструкция к шагам 1 и 2. (<a href="http://www.smashingmagazine.com/wp-content/uploads/2014/07/step1.gif">Картинка в высоком разрешении</a>)</em></p>

<p>Начинать с форка отличная идея, ведь это позволит выяснить что 
из себя представляет Jekyll без необходимости поднимать локальное окружение 
для разработки, устанавливать зависимости и разбираться с процессом сборки.</p>

<p><strong>Проблема №1</strong>: Создание сайта на базе Jekyll через терминал может
раздражать и занимать много времени, так как надо <strong>установить и настроить
зависимости</strong>, например, Ruby и RubyGems. Позвольте GitHub Pages 
собирать ваш сайт, пока не возникнет реальная причина делать сборку локально.</p>

<h3 id="2razmestimsaytnavashemgithubakkaunte"><a href="#2razmestimsaytnavashemgithubakkaunte">2. Разместим сайт на вашем GitHub-аккаунте</a></h3>

<p>Как пользователь GitHub, вы можете бесплатно создавать «пользовательские» сайты
(в отличии от веб-сайтов «проектов»), которые будут доступны по адресу
<code>http://yourusername.github.io</code>. Идеально подходит для размещения 
блога на Jekyll!</p>

<p>Лучше всего в этом то, что вы просто помещаете Jekyll-блог в ветку <code>master</code>,
после чего GitHub Pages сам соберет статический сайт и будет его раздавать.
Вам вообще не нужно беспокоиться о процессе сборки&nbsp;—&nbsp;об этом уже позаботились.</p>

<p>Нажмите кнопку «Settings» в форке репозитория (меню справа) и измените имя
репозитория на <code>yourusername.github.io</code>, заменив <code>yourusername</code> на ваше имя
пользователя на GitHub.</p>

<p>Скорее всего, сайт станет доступен немедленно, это можно проверить открыв
<code>http://yourusername.github.io</code>. Если ещё не доступен —&nbsp;не беспокойтесь,
на Шаге 3 мы выясним как принудительно вызвать сборку.</p>

<p><img src="img/jekyll-now-theme-500-opt.png" alt="Базовая тема блога непосредственно после форка будет выглядеть следующим образом."></p>

<p><em>Базовая тема блога непосредственно после форка будет выглядеть следующим образом.
(Источник:<a href="http://github.com/barryclark/jekyll-now">Jekyll Now</a>) (<a href="http://www.smashingmagazine.com/wp-content/uploads/2014/07/jekyll-now-theme-large-opt.jpg">В высоком разрешении</a>)</em></p>

<p>Уф! Мы быстро продвигаемся, мы уже запустили сайт на Jekyll! Давайте сделаем шаг
назад и рассмотрим наиболее часто встречающиеся проблемы, которые стоит
иметь ввиду, размещая Jekyll-блог на GitHub Pages.</p>

<p><strong>Проблема №2</strong>: нужно понимать различия между размещением на GitHub 
<a href="https://help.github.com/articles/user-organization-and-project-pages">сайта пользователя и страницы проекта</a>. Для пользовательского сайта (который 
мы делаем) не нужно создавать никакие ветки: <code>master</code> и так сконфигурирована 
нужным образом, чтобы обрабатывать с помощью Jekyll всё, что в неё помещают,
и создавать статический сайт. Нет нужды создавать ветку <code>gh-pages</code>.</p>

<p><strong>Проблема №3</strong>: использование сайта для проекта 
<a href="http://jekyllrb.com/docs/github-pages/#project_page_url_structure">немного все усложняет</a>, так как сайт будет находиться 
в поддиректории. URL будет выглядеть так: <code>http://yourname.github.io/repository-name</code>, 
что вызовет проблемы с шаблонами в Jekyll: например, битые ссылки 
на картинки и невозможность посмотреть сайт локально.</p>

<p><strong>Проблема №4</strong>: для Jekyll существует <a href="http://jekyllrb.com/docs/plugins/">масса плагинов</a>, но GitHub Pages
поддерживает <a href="https://help.github.com/articles/using-jekyll-plugins-with-github-pages">всего несколько из них</a>. Если подключить плагин,
который не поддерживается, Jekyll не сможет собрать сайт, так что строго
придерживайтесь списка поддерживаемых плагинов. Благо мой любимый
плагин есть в списке: <a href="https://github.com/jekyll/jemoji">Jemoji</a> — он позволяет добавлять в статьи <a href="http://en.wikipedia.org/wiki/Emoji">emoji</a>,
как на GitHub или Basecamp.</p>

<h3 id="3nastraivaemsayt"><a href="#3nastraivaemsayt">3. Настраиваем сайт</a></h3>

<p>Теперь можно изменить имя сайта, его описание, аватар и прочие настройки
отредактировав файл <code>_config.yml</code>. Эти пользовательские переменные для удобства 
были вынесены отдельно, и они подтянутся в тему сайта во время сборки.</p>

<p>Изменение <code>_config.yml</code> (или любого файл в репозитории) вызовет повторную сборку
сайта. Увидеть результат можно будет через пару секунд по адресу
<code>http://yourusername.github.io</code>. Если после Шага 2 сайт не появился, то он
появится после этого действия.</p>

<p>Вперед, адаптируйте сайт под себя, изменяя переменные в <code>_config.yml</code> и
коммитя изменения.</p>

<p>Вы можете править файлы одним из трех способов. Выберите тот, который
вас больше устраивает:</p>

<ul>
<li>Редактируйте файлы непосредственно в браузере на сайте GitHub.com в 
вашем репозитории <code>username.github.io</code> (как показано ниже).</li>
<li>Используйте сторонний редактор, поддерживающий работу с GitHub, например,
<a href="http://prose.io">Prose</a>, разработанный Development Seed. Он оптимизирован для работы с
Jekyll и позволяет легко редактировать Markdown, создавать черновики 
и загружать изображения.</li>
<li>Клонируйте репозиторий, внесите правки локально, затем пушните все обратно
в репозиторий на GitHub (<a href="https://www.atlassian.com/git/tutorial/git-basics">у Atlassian даже есть гайд</a> на эту тему).</li>
</ul>
<p><img src="img/config-500-opt.png" alt="Редактируем _config.yml на GitHub.com"></p>

<p><em>Редактируем _config.yml на GitHub.com. (Источник: <a href="http://github.com/barryclark/jekyll-now">Jekyll Now</a>) (<a href="http://www.smashingmagazine.com/wp-content/uploads/2014/07/config-large-opt.png">В высоком разрешении</a>)</em></p>

<p><strong>Проблема №5</strong>: Не думайте, что нужно выполнять <code>jekyll build</code> локально,
чтобы внести изменения в сайт на Jekyll — GitHub Pages сделает 
это за вас. Достаточно поместить файлы, которые нужно собрать, 
в ветку <code>master</code> репозитория с вашим сайтом или в <code>gh-pages</code> любого другого репозитория, после этого GitHub Pages соберет их используя Jekyll.</p>

<h3 id="4publikuempervuyustatyyu"><a href="#4publikuempervuyustatyyu">4. Публикуем первую статью</a></h3>

<p>Теперь сайт настроен, работает и отлично выглядит. Можно опубликовать
первую статью:</p>

<ol>
<li>Отредактируйте <code>/_posts/2014-3-3-Hello-World.md</code>, удалите «рыбу» и введите
свой текст. Если нужно освежить в памяти основы использования Markdown,
используйте <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">шпаргалку Адама Причарда (Adam Pritchard)</a>.</li>
<li>Измените имя файла, что бы оно включало текущую дату и заголовок поста.
Jekyll требует определённый формат именования: <code>year-month-day-title.md</code>.</li>
<li>Обновите заголовок. Переменные в начале файла называются вводным блоком,
мы рассмотрим их более подробно немного позже. В данном случае они определяют
заголовок статьи и используемый шаблон. Существуют и
<a href="http://jekyllrb.com/docs/frontmatter/">другие переменные, которые можно использовать во вводном блоке</a>,
например, <code>permalink</code>, <code>tags</code> и <code>category</code>.</li>
</ol>
<p>Если захотите создать новую статью на GitHub.com прямо в вашем браузере, 
просто перейдите в директорию <code>/_posts/</code> и нажмите иконку «+». 
Главное — не забывайте придерживаться формата имени файлов и добавлять 
вводный блок, чтобы файлы обрабатывались Jekyll.</p>

<p><img src="img/newpost-500-opt.png" alt="Создание новой статьи на сайте GitHub.com"></p>

<p><em>Создание новой статьи на сайте GitHub.com. (<a href="http://www.smashingmagazine.com/wp-content/uploads/2014/07/newpost-large-opt.png">В высоком разрешении</a>)</em></p>

<p><strong>Проблема №6</strong>: Единственная проблема с Jekyll, с которой я
столкнулся при создании блога —&nbsp;отсутствие CMS, так что я не мог 
просто залогиниться в CMS, чтобы сделать быстрые правки, находясь за 
чужим компьютером. Оказывается, блог на Jekyll будет иметь CMS, если использовать
GitHub Pages, так как роль CMS исполняет сам GitHub. Можете редактировать статьи
в браузере даже с телефона, если захотите. И, хотя это не так удобно как
в других CMS, — это не помешает вам внести изменения даже если вы окажетесь 
далеко от своего компьютера.</p>

<h3 id="neobyazatelyneshagi"><a href="#neobyazatelyneshagi">Необязательные шаги</a></h3>

<h4 id="ispolyzovaniesvoegodomennogoimeni"><a href="#ispolyzovaniesvoegodomennogoimeni">Использование своего доменного имени</a></h4>

<p>Настройка доменного имени, что бы оно указывало на GitHub Pages — это простое
действие, состоящее из двух шагов:</p>

<ol>
<li>Создайте в корневой директории репозитория файл CNAME так, что бы он содержал
нужное доменное имя (например, <code>www.yourdomainname.com</code>).</li>
<li>У регистратора доменного имени добавьте в настройках DNS запись CNAME,
указывающую на GitHub Pages:</li>
</ol>
<ul>
<li>type: <code>CNAME</code>
</li>
<li>host: <code>www.yourdomainname.com</code>
</li>
<li>answer: <code>yourusername.github.io</code>
</li>
<li>TTL: <code>300</code>
</li>
</ul>
<p>Затем настойчиво обновляйте <a href="https://www.whatsmydns.net/">What’s My DNS</a>, пока не распространится
информация о новой записи. Если возникнут проблемы, обратитесь к
документации: «<a href="https://help.github.com/articles/setting-up-a-custom-domain-with-pages">Настройка пользовательского доменного имени при работе с
GitHub Pages</a>».</p>

<h4 id="importstateyizwordpress"><a href="#importstateyizwordpress">Импорт статей из WordPress</a></h4>

<p>Прежде чем импортировать статьи в блог, их надо сначала экспортировать из
WordPress, возможно, немного адаптировав (например, обновив ссылки на
изображения), и только затем импортировать их в ваш блог на Jekyll. 
К счастью есть несколько инструментов, которые могут в этом помочь.</p>

<p>Для <strong>экспорта статей из WordPress</strong>, я очень рекомендую
<a href="https://github.com/benbalter/wordpress-to-jekyll-exporter">WordPress to Jekyll Exporter</a> Бена Балтера (Ben Balter), который позволяет
сделать всё в один клик. Он экспортирует весь контент WordPress-блога, 
включая статьи, изображения и мета-данные, конвертирует, где необходимо, 
в подходящий для Jekyll формат и выдает в виде ZIP-архива. Спасибо тебе, Бен.</p>

<p>Ещё один вариант —&nbsp;экспортировать все содержимое WordPress через меню 
«Tools» панели администрирования, а затем импортировать используя <a href="http://import.jekyllrb.com/docs/wordpress/">Jekyll’s importer</a>.</p>

<p>Затем, нужно <strong>обновить ссылки на изображения</strong>. Плагин, написанный Беном
Балтером, экспортирует все изображения в папку. Затем их нужно будет 
скопировать туда, где вы храните изображения для своего Jekyll-блога, 
это может быть папка <code>/images</code> или CDN.</p>

<p>После этого перед нами встанет задача обновить все ссылки на изображения 
в статьях. Так как я обновлял всего пять-шесть статей, мне отлично подошли
быстрый поиск и замена, но если материалов много, тогда, возможно, 
стоит написать скрипт или подобрать уже готовый, например, 
скрипт <a href="https://gist.github.com/stammy/790971">Паула Стаматиуса (Paul Stamatiou)</a>.</p>

<p>И, наконец, нужно <strong>импортировать комментарии</strong>. Так как Jekyll —&nbsp;платформа для
статических сайтов, он не поддерживает комментарии, однако, решения вроде Disqus
отлично подходят для такого случая! Я рекомендую <a href="http://help.disqus.com/customer/portal/articles/466255-importing-comments-from-wordpress">импортировать комментарии из
WordPress в Disqus</a>, затем, если вы используете Jekyll Now, можете ввести
имя пользователя Disqus в <code>_config.yml</code> и все заработает.</p>

<h4 id="napisaniestateylokalynovlyubimomtekstovomredaktore"><a href="#napisaniestateylokalynovlyubimomtekstovomredaktore">Написание статей локально в любимом текстовом редакторе</a></h4>

<p>Если вы предпочитаете писать статьи в Sublime, Vim, Atom или другом редакторе,
всё, что нужно сделать —&nbsp;клонировать репозиторий, создать новый пост на Markdown
в директории <code>_posts</code> и затем запушить изменения на GitHub. GitHub Pages
автоматически пересоберёт сайт как только файл с маркдауном попадет в
репозиторий, и новая статья появится в блоге сразу по окончании сборки.</p>

<ol>
<li>Сначала выполните команду <code>git clone git@github.com:yourusername/yourusername.github.io.git</code>,
или клонируйте репозиторий используя <a href="https://mac.github.com/">GitHub Mac</a>.</li>
<li>Создайте файл для новой статьи в папке <code>_posts</code>. Не забудьте назвать его в
соответствии с форматом <code>year-month-day-title.md</code> и добавить в начало
вводный&nbsp;блок.</li>
<li>Закоммитьте файл статьи и пушните в репозиторий. Может быть полезным посмотреть
<a href="https://www.atlassian.com/git/tutorial/git-basics">основы Git от компании Atlassian</a>.</li>
<li>Вот и все! Подождите пока GitHub Pages пересоберет сайт. Обычно это занимает
не больше 10 секунд, если у вас, конечно, не слишком много статей.</li>
</ol>
<p><strong>Проблема №7</strong>: Опять же, не нужно собирать сайт локально, чтобы написать и
опубликовать статью. Можно просто локально написать статью и пушнуть
её со всеми картинками в репозиторий, после чего GitHub Pages сам пересоберет 
сайт на сервере.</p>

<h3 id="sozdanietemdlyajekyll"><a href="#sozdanietemdlyajekyll">Создание темы для Jekyll</a></h3>

<p>Хотите изменить тему? Вот кое-что, что вам нужно знать:</p>

<h4 id="sborkasaytalokalyno"><a href="#sborkasaytalokalyno">Сборка сайта локально</a></h4>

<p>Если вы захотите создать довольно сложную тему, разумно проводить 
её разработку и тестирование локально. Это необязательно, можно просто
пушить изменения в репозиторий и GitHub Pages всё соберёт, однако видеть
изменения в процессе работы может быть полезно.</p>

<p>Сначала нужно установить Jekyll и его зависимости. Запустите <code>gem install jekyll</code>,
затем <code>gem install jemoji jekyll-sitemap</code>. Должны быть установлены <a href="http://www.ruby-lang.org/">Ruby</a>,
<a href="http://rubygems.org/">RubyGems</a> и <a href="https://github.com/gettalong/kramdown">Kramdown</a>. Полный <a href="https://github.com/jekyll/jekyll">список зависимостей Jekyll</a>.</p>

<p>Вот шаги для локального создания и просмотра сайта на Jekyll:</p>

<ol>
<li>Сначала перейдите (<code>cd</code>) в директорию, в которой находится сайт.</li>
<li>Запустите <code>jekyll serve --watch</code>. (у Jekyll <a href="http://jekyllrb.com/docs/usage/">масса встроенных настроек</a>.)</li>
<li>Откройте свой сайт по адресу <code>http://0.0.0.0:4000</code>.</li>
<li>Когда закончите, закоммитьте изменения и пушните все в ветку <code>master</code>
соответствующего репозитория. GitHub Pages пересоберёт сайт.</li>
</ol>
<p><strong>Проблема №8</strong>: Имейте в виду, что <code>jekyll build</code> стирает
все содержимое папки <code>/_sites/</code>. Первый шаг <code>jekyll build</code> —&nbsp;удаление
всего, что есть в <code>/_sites/</code>, и сборка всех страниц с нуля. Так что
не стоит хранить там файлы, если вы не хотите, чтобы они
исчезли при следующей же сборке. В <code>/_sites/</code> должно быть
только то, что генерирует Jekyll.</p>

<h3 id="strukturadirektoriy"><a href="#strukturadirektoriy">Структура директорий</a></h3>

<p>Вот структура сайта на Jekyll:</p>

<pre><code class="hljs php">/Users/barryclark/Code/jekyll-now
├─ CNAME <span class="hljs-comment"># Содержит доменное имя (опционально)</span>
├─ _config.yml <span class="hljs-comment"># Файл конфигурации Jekyll</span>
├─ _includes <span class="hljs-comment"># Сниппеты кода, которые можно использовать в шаблонах</span>
│  ├─ analytics.html
│  └─ disqus.html
├─ _layouts
│  ├─ <span class="hljs-keyword">default</span>.html <span class="hljs-comment"># Основной шаблон. Включает &lt;head&gt;, &lt;navigation&gt;, &lt;footer&gt;, и т.д.</span>
│  ├─ page.html <span class="hljs-comment"># Шаблон для статических страниц</span>
│  └─ post.html <span class="hljs-comment"># Шаблон для постов в блоге</span>
├─ _posts <span class="hljs-comment"># Все посты —&nbsp;тут!</span>
│  └─ <span class="hljs-number">2014</span><span class="hljs-number">-3</span><span class="hljs-number">-3</span>-Hello-World.md
├─ _site <span class="hljs-comment"># После сборки сайта Jekyll генерирует HTML в этой директории. Это то, что отдается браузеру!</span>
│  ├─ CNAME
│  ├─ LICENSE
│  ├─ about.html
│  ├─ feed.xml
│  ├─ index.html
│  ├─ sitemap.xml
│  └─ style.css
├─ about.md <span class="hljs-comment"># Статическая страница "О проекте", которую я создал.</span>
├─ feed.xml <span class="hljs-comment"># XML для работы RSS</span>
├─ images <span class="hljs-comment"># Содержит все картинки</span>
│  ├── first-post.jpg
├─ index.html <span class="hljs-comment"># Лэндинг</span>
├─ scss <span class="hljs-comment"># Sass со стилями сайта</span>
│  ├─ _highlights.scss
│  ├─ _reset.scss
│  ├─ _variables.scss
│  └─ style.scss
└── sitemap.xml <span class="hljs-comment"># Карта сайта</span>
</code></pre>

<h3 id="shablonizatorliquid"><a href="#shablonizatorliquid">Шаблонизатор Liquid</a></h3>

<p>Jekyll использует язык шаблонов Liquid. Про него нужно знать две важные вещи:</p>

<p>Во-первых, в начале каждого файла есть <strong>вводный блок YAML</strong>, он определяет шаблон
для вывода страницы и такие переменные, как <code>title</code>, <code>date</code> и <code>tags</code>. 
Кроме того, он может содержать пользовательские переменные.</p>

<p><strong>Теги шаблонизатора Liquid</strong> используются для создания циклов, 
условных операторов и для вывода материалов.</p>

<p>Например, пусть каждая статья в блоге использует шаблон из <code>/_layouts/post.html</code>:</p>

<pre><code class="hljs handlebars"><span class="xml">---
layout: default
---

<span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post"</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span></span><span class="hljs-template-variable">{{ page.title }}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"entry"</span>&gt;</span>
    </span><span class="hljs-template-variable">{{ content }}</span><span class="xml">
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"date"</span>&gt;</span>
    Написано </span><span class="hljs-template-variable">{{ page.date | date: "%B %e, %Y" }}</span><span class="xml">
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"comments"</span>&gt;</span>
    {% include disqus.html disqus_identifier=page.disqus_identifier %}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
</span></code></pre>

<p>Вначале файла располагается вводный блок YAML, окруженный тремя дефисами. В нем
мы определяем, что файл должен быть обработан как содержимое шаблона <code>default.html</code>,
который содержит шапку и подвал сайта.</p>

<p>Разметка Liquid использует двойные фигурные скобки для вывода данных. Самые
первые Liquid-теги в примере выше <code>{{ page.title }}</code> и <code>{{ content }}</code> —
они выводят заголовок и содержание статьи. <a href="http://jekyllrb.com/docs/variables/">В Jekyll доступно множество
переменных</a> для использования в шаблонах.</p>

<p>Одинарные фигурные и квадратные скобки используются для создания условных
операторов, циклов и включения сниппетов кода. В этом примере я добавил в 
конец шаблона блок комментариев Disqus, который находится в файле
<code>/_includes/disqus.html</code>.</p>

<h3 id="_configyml"><a href="#_configyml">_config.yml</a></h3>

<p>Это файл конфигурации Jekyll, который содержит <a href="http://jekyllrb.com/docs/configuration/">все настройки блога</a>. Что
хорошо в <code>_config.yml</code>, так это то, что в нем можно задавать пользовательские
переменные, которые затем можно будет использовать в шаблонах сайта.</p>

<p>Например, я использую пользовательские переменные из <code>_config.yml</code> в блоге 
Jekyll Now, чтобы можно было удобно добавлять SVG-иконки в подвал сайта.</p>

<p>Вот переменные в <code>_config.yml</code>:</p>

<pre><code class="hljs bash"><span class="hljs-comment"># Этот код добавляет иконку в подвал для каждого имени пользователя в списке</span>
footer-links:
  github: barryclark
  twitter: baznyc
</code></pre>

<p>И вот как они используются в <code>/_layouts/default.html</code>:</p>

<pre><code class="hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"footer"</span>&gt;</span>
  {% if site.footer-links.github %}<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://github.com/</span></span></span><span class="hljs-template-variable">{{ site.footer-links.github }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>{% include svg-icons/github.html %}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>{% endif %}
  {% if site.footer-links.twitter %}<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"http://twitter.com/</span></span></span><span class="hljs-template-variable">{{ site.footer-links.twitter }}</span><span class="xml"><span class="hljs-tag"><span class="hljs-string">"</span>&gt;</span>{% include svg-icons/twitter.html %}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>{% endif %}
<span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">figure</span>&gt;</span>
</span></code></pre>

<p><img src="img/footer-icons-opt.png" alt="Пример SVG-иконок в подвале"></p>

<p><em>Пример SVG-иконок в подвале</em></p>

<p>Переменные в ссылку на Twitter добавляются следующим образом:
<code>http://twitter.com/{{ site.footer-links.twitter }}</code>, так что ссылка в футере
будет указывать на вашу учетную запись в Twitter. Ещё одна вещь, 
которая меня радует в переменных, — то, что их можно использовать для
опционального отображения элементов интерфейса. Например, иконок в футере 
вообще не будет, если вы не зададите значение переменной.</p>

<p><strong>Проблема №9</strong>: Обратите внимание, что изменения в <code>_config.yml</code> обновляются во
время сборки, а не в реальном времени. Это означает, что если вы запускаете
локально <code>jekyll serve</code> и редактируете <code>_config.yml</code>, — изменения не применятся.
Нужно остановить и снова запустить <code>jekyll serve</code>.</p>

<h3 id="shablonistaticheskiestranits"><a href="#shablonistaticheskiestranits">Шаблоны и статические страницы</a></h3>

<p>Большинству простых блогов нужно всего два шаблона: один для постов
(<code>post.html</code>) и один для статических страниц (<code>page.html</code>). И единственная 
разница между ними в Jekyll Now состоит в том, что <code>post.html</code> включает блок
комментариев Disqus и дату, а <code>page.html</code> —&nbsp;нет.</p>

<p>Если вы создадите файл с расширением <code>.html</code> или <code>.md</code> в корневой 
директории сайта, он будет рассматриваться как статическая страница. 
Например <code>about.md</code> будет доступна по адресу <code>www.mysite.com/about</code>. 
Легко и просто!</p>

<h3 id="izobrazheniya"><a href="#izobrazheniya">Изображения</a></h3>

<p>Я храню изображения в директории репозитория <code>/images/</code> и на данный
момент не испытываю никаких проблем с производительностью. Если сайт размещен 
на GitHub Pages, изображения будут отдаваться с CDN GitHub'а и очень быстро
загружаться. Я пока не вижу причин хранить их в другом месте, но, если 
уж мигрировать куда-нибудь вроде CloudFront, изменить ссылки совершенно 
не проблема.</p>

<p>Мне нравится простота хранения изображений в директории <code>/images/</code>, 
добавлять картинки в пост тоже очень просто, код в маркдаун выглядит вот так:</p>

<pre><code class="hljs markdown">![<span class="hljs-string">Image description</span>](<span class="hljs-link">/images/my-image.jpg</span>)
</code></pre>

<h3 id="podderzhkapreprotsessorov"><a href="#podderzhkapreprotsessorov">Поддержка препроцессоров</a></h3>

<p>Jekyll на данный момент поддерживает Sass и CoffeeScript без необходимости
использовать плагины или Grunt. Можно просто добавить файлы с расширениями
<code>.sass</code>, <code>.scss</code> и <code>.coffee</code> в рабочую директорию, и Jekyll их обработает,
сгенерировав в той же директории <code>.css</code> и <code>.js</code></p>

<p><img src="img/sass.svg" alt="It's Sass time!" title="It's Sass time!"></p>

<p><em>Время Sass'ить! (Источник: <a href="http://sass-lang.com/">Sass</a>)</em></p>

<p>Чтобы быть уверенным, что <code>.sass</code>, <code>.scss</code> и <code>.coffee</code> будут обрабатываться, 
добавьте в начало файлов две строки с тройным дефисом:</p>

<pre><code class="hljs scss">---
---
<span class="hljs-variable">$color-coffee</span>: <span class="hljs-number">#644C37</span>;
</code></pre>

<p>Если вы используете <code>@imports</code> для разбиения Sass на модули, надо сообщить об этом
Jekyll, добавив в <code>_config.yml</code> следующее:</p>

<pre><code class="hljs less"><span class="hljs-attribute">sass</span>:
  <span class="hljs-attribute">sass_dir</span>: _scss
</code></pre>

<p>Кроме того, можно задать стиль вывода скомпилированного CSS:</p>

<pre><code class="hljs less"><span class="hljs-attribute">sass</span>:
  <span class="hljs-attribute">sass_dir</span>: _scss
  <span class="hljs-attribute">style</span>: :compressed
</code></pre>

<h2 id="rasshirennevozmozhnostijekyll"><a href="#rasshirennevozmozhnostijekyll">Расширенные возможности Jekyll</a></h2>

<p>В Jekyll есть несколько мощных, более продвинутых фич,
которые могут пригодиться, если вы захотите создать что-либо
сложнее простого блога.</p>

<h3 id="fayldannh"><a href="#fayldannh">Файлы данных</a></h3>

<p>Есть два способа интегрировать внешние данные в Jekyll.
Первый — используя сторонние сервисы и API. Например, Disqus
позволяет добавлять динамический контент на статический сайт
используя внешние сервисы.</p>

<p>Второй способ —&nbsp;использование файлов данных. Jekyll может читать <a href="http://jekyllrb.com/docs/datafiles/">файлы</a> в
формате YAML и JSON из директории <code>/_data/</code> и позволяет использовать их в
шаблонах как обычные переменные. Это весьма полезно для хранения переиспользуемых
данных или настроек, которые вы не хотите помещать в <code>_config.yml</code>, чтобы он
не разрастался сверх меры.</p>

<p>Кроме того, data-файлы дают возможность добавлять на сайт большие наборы
данных. Можно написать скрипт, который будет разбивать их на несколько 
JSON-файлов и размещать их в директории <code>/_data/</code>. Ярким примером такого подхода
является <a href="http://developmentseed.org/blog/google-analytics-jekyll-plugin/">использование данных Google Analytics в Jekyll</a> для 
ранжирования постов по популярности.</p>

<h3 id="kollektsii"><a href="#kollektsii">Коллекции</a></h3>

<p>Два стандартных типа документов Jekyll — это посты (статьи для блога) и
страницы (просто статический контент). Релиз Jekyll 2.0 добавил
<a href="http://jekyllrb.com/docs/collections/">коллекции</a>, которые позволяют создавать собственные
типы документов. Например, можно использовать коллекции для
создания фотоальбома, книги или портфолио.</p>

<h2 id="zaklyuchenie"><a href="#zaklyuchenie">Заключение</a></h2>

<p>Jekyll подходит не для каждого проекта. Основным недостатком
генератора статики является сложность внедрения динамических
функций на стороне сервера. Количество сервисов, которые
можно интегрировать в проект, таких как Disqus, растет, но
не все из них предоставляют гибкие настройки и возможность
контроля. Jekyll не подходит для создания сайтов с
базами пользователей, так как в нём нет ни баз данных, ни
логики на стороне сервера для обработки регистрации или
аутентификации.</p>

<p>Достоинства Jekyll —&nbsp;его простота и минимализм. Jekyll
дает вам всё необходимое, чтобы создать сайт,
ориентированный на контент, и который 
не подразумевает особой интерактивности. Это делает
Jekyll идеальным для блога и портфолио и позволяет
использовать его для реализации простых сайтов для
клиентов.</p>

<p>Не дайте репутации Jekyll, как платформы для создания
блогов для хакеров, отпугнуть вас. Создание
красивых, быстрых, минималистичных сайтов с его помощью не
требует элитных хакерских навыков или умения работать с
командной строкой. Как я уже показал в пошаговом руководстве
выше, его можно настроить за считанные минуты, посвятив остальное 
время работе над контентом и дизайном.</p>

<h2 id="resursdlyadalyneyshegoizucheniya"><a href="#resursdlyadalyneyshegoizucheniya">Ресурсы для дальнейшего изучения</a></h2>

<ul>
<li><p><a href="http://jekyllrb.com">Jekyll</a>
Официальный сайт — это лучший ресурс для изучения Jekyll и создания сайта.<br>
Значительная часть информации для статьи была почёрпнута оттуда.</p></li>
<li><p><a href="http://github.com/barryclark/jekyll-now">Jekyll Now</a>
Этот ресурс упрощает создание блога на основе Jekyll, избавляя от необходимости
разбираться вот множестве начальных настроек.</p></li>
<li><p><a href="http://github.com/jekyll/jekyll">Исходный код Jekyll</a>
Репозиторий содержит исходный код и дискуссии на тему Jekyll.</p></li>
</ul>

    <section class="prose-editor">
<p>Если вы заметили ошибку, вы всегда можете <a class="prose-edit" href="http://prose.io/#FrontenderMagazine/build-blog-jekyll-github-pages/edit/master/rus.md">отредактировать статью</a>, <a href="https://github.com/FrontenderMagazine/build-blog-jekyll-github-pages/issues/new">создать issue</a> или просто написать об этом Антону Немцеву в skype <a href="skype:ravencry?chat">ravencry</a>.</p>
</section>
</article>
